package cn.cza.springboot.modules.register.Service.Impl;import cn.cza.springboot.commons.utils.CheckCodeTool;import cn.cza.springboot.commons.utils.R;import cn.cza.springboot.modules.register.Dao.CheckCodeMapper;import cn.cza.springboot.modules.register.Dao.UserMapper;import cn.cza.springboot.modules.register.Pojo.CheckCode;import cn.cza.springboot.modules.register.Pojo.User;import cn.cza.springboot.modules.register.Service.CheckCodeService;import com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;/** * @Author: 车子昂 * @Date: 2019-4-25 15:44 * @Description: */@Servicepublic class CheckCodeServiceImpl implements CheckCodeService {    @Autowired    private UserMapper userMapper;    private CheckCodeMapper checkCodeMapper;    @Override    public R send(String phone) {        R r = CheckCodeTool.sendCheckCode();        UpdateWrapper<User> ew = new UpdateWrapper<>();        ew.eq("phone", phone);        ew.eq("isdel", "0");        CheckCode checkCode = new CheckCode();        checkCode.setCheckcode((String) r.get("sixRandom"));        int insert = checkCodeMapper.insert(checkCode);        if (insert != 0) {            r.put("success", true);            r.put("sixRandom", (String) r.get("sixRandom"));        }        return r;    }}